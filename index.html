<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, height=device-height, minimum-scale=1.0, initial-scale=1.0, user-scalable=0" name="viewport">
  <title>Keng42's Blog</title>
  <link rel="shortcut icon" href="favicon.ico" />
  <link rel="stylesheet" href="master.css">
  <script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script>
  <script src="marked.js"></script>
  <script src="highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
    marked.setOptions({
      renderer: new marked.Renderer(),
      gfm: true,
      tables: true,
      breaks: true,
      pedantic: false,
      sanitize: true,
      smartLists: true,
      smartypants: false
    });

  </script>

  <script>
    $(document).ready(function() {
      var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
      var box = $('#box');
      var url = 'https://api.github.com/repos/keng42/keng42.github.io/issues';
      $.get(url, function(resp, status) {
        console.log(status);
        console.log(resp);
        for (item of resp) {
          var d = new Date(item.created_at);
          var date = months[d.getMonth()] + ' ' + d.getDate() + ', ' + d.getFullYear();
          var body = marked(item.body);
          var time = item.created_at.replace('T', ' ').replace('Z', '');
          var html = '<div class="title">' +
            '<a href="' + item.url.replace('api.github.com/repos', 'github.com') + '">' + item.title + '</a>' +
            '</div>' +
            '<div class="date">' +
            date +
            '</div>' +
            '<div class="content">' +
            '<a href="javascript:;" class="show-content">' +
            '<div class="toggle">' + '' +
            '<p>' +
            '<span class="readmore">read more</span>' +
            '</p>' +
            '</div>' +
            '</a>' +
            '<div style="display:none">' + item.body + '</div>' +
            '</div>' +
            '</div>'
          box.append(html);
        }
        $('.show-content').click(function() {
          var obj = $(this).siblings()[0];
          var par = $(this).parent();
          console.log(obj);
          par.html(marked(obj.innerText));
          $('pre code').each(function(i, block) {
            hljs.highlightBlock(block);
          });
        });
      });
    });

  </script>

</head>

<body>
  <header>
    <div class="left">
      <img src="logo.png" alt="logo" />
    </div>
    <div class="right">
      <div class="header-title">
        <h2>
          <a href="#">Personal Blog</a>
        </h2>
      </div>
      <div class="header-desc">
        My answer to the Ultimate Question of Life, the Universe, and Everything
      </div>
    </div>
  </header>
  <div class="divider">

  </div>
  <main>
    <div id="box" class="left">

    </div>
    <div class="right">

    </div>

  </main>

</body>

</html>
